<!DOCTYPE html>
<html ng-app="app" >
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>

      form {
        display: flex;
        align-items: center;
      }

      form button {
        margin-left: 10px;
      }

      .result-container__list {
        padding-top: 25px;
      }

      .brand {
        padding-top: 25px;
      }

      .results__staff-block {
        margin-top: 25px;
      }

      .results-member__container,
      .results__staff-block {
        padding:10px;
        border-radius: 5px;
        border: 1px solid #eee;
      }

      .results__vote-block {
        /*margin-top: 5px;
        margin-bottom: 5px;*/
        border-top: 1px solid #eee;

        padding: 10px;
      }

      .results-member__social {
        padding-top: 10px;
        padding-bottom: 5px;
      }

      .search__input {
        padding-top: 25px;
      }

      .results__vote-container {
        margin-top: 25px;
      }

      .pagination-block__box {
        display: flex;
        justify-content: center;
      }

      .pagination-block__box li {
        padding-left: 5px;
        padding-right: 5px;
      }

    </style>
  </head>
  <body>
    <div class="container" ng-controller="mainCtrl">
      <div class="row">
        <div class="col-12 brand">
          <h1>Dallas Reps</h1>
          <span>Find and contact your council member</span>
        </div>
      </div>
      <div class="row">
        <div class="col-12 search__input">
          <form ng-submit="getAddress(input)">
            <input class="col-4"
                  type="text"
                  ng-model="input"
                  placeholder="Enter your address">
            <button type="submit" class="btn btn-primary">Search</button>
          </form>
        </div>
      </div>
      <div class="row">

        <div class="col-12 result-container__list" ng-if="searched">
          <div ng-if="!yourInfo">
            Sorry! No results were found. Is this address within Dallas city?
          </div>
          <div ng-repeat="person in yourInfo">
            <div class="results-member__container">
              <strong>Council Member:</strong> {{matchedRep.name}}<br>

              <strong>District:</strong> {{matchedRep.district}}

              <div class="" ng-if="matchedRep.phones">
                <strong>Phone:</strong> <span ng-repeat="phone in matchedRep.phones">{{phone}}</span>
              </div>

              <div ng-if="matchedRep.emails">
               <!-- <strong>Email:</strong> -->

               <span ng-repeat="email in matchedRep.emails"><a href="mailto:{{email}}"><i class="fa fa-envelope-o" aria-hidden="true"></i> {{email}}</a><br></span>
              </div>

              <div class="results-member__social">
                <a href="http://www.twitter.com/{{matchedRep.channels[0].id}}" target="_blank" ng-if="matchedRep.channels[0].id !== null"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                <a href="http://www.facebook.com/{{matchedRep.channels[1].id}}" target="_blank" ng-if="matchedRep.channels[1].id !== null"><i class="fa fa-facebook-square" aria-hidden="true"></i></a>
                <!-- instagram <a href="http://www.instagram.com/{{matchedRep.channels[2].id}}" target="_blank" ng-if="matchedRep.channels[0].id.length>0"><i class="fa fa-instagram" aria-hidden="true"></i></a> -->
              </div>

            </div>
            <div class="results__staff-block">
             <span><strong>Staff:</strong></span>
             <p ng-repeat="one in matchedRep.staff">
               {{one.name}}, <em>{{one.position}}</em><br>
               <a href="mailto:{{one.email}}">{{one.email}}</a><br>
               {{one.phone}}
             </p>
            </div>
            <div class="results__vote-container">
              <h4>Council Voting Record</h4>
              <!-- <div ng-if="matchedRep.itemsVoted" class="results__vote-block" ng-repeat="item in matchedRep.itemsVoted | orderBy:'item.date'"

              > -->

              <div dir-paginate="item in matchedRep.itemsVoted | itemsPerPage: 5">

                  <div>
                    <small>Agenda ID: {{item.agenda_id}}, Item No. {{item.agenda_item_number}} | Voter Name:  {{item.voter_name}}<br>
                    {{item.date}}
                    </small>
                    <!-- <br><small>{{item.date}}</small> -->
                  </div>
                  <div>
                    <span class="badge" ng-class="item.vote == 'YES' ? 'badge-success' : 'badge-warning'">{{item.vote}}</span> - {{item.agenda_item_description}}
                  </div>

                <!-- {{matchedRep.itemsVoted}} -->
              </div>
            </div>

          </div>
        </div>

      </div>

      <div class="pagination-block__box">
        <dir-pagination-controls></dir-pagination-controls> 
      </div>



    </div>

    <!-- <div ng-controller="OtherController" class="other-controller">
      <small>this is in "OtherController"</small>
      <div class="text-center">
      <dir-pagination-controls boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)" template-url="dirPagination.tpl.html"></dir-pagination-controls>
      </div>
    </div> -->




    <script src="bower_components/angular/angular.js" charset="utf-8"></script>

    <script src="./js/app.js" charset="utf-8"></script>
    <script src="./js/mainCtrl.js" charset="utf-8"></script>
    <script src="./js/mainSrv.js" charset="utf-8"></script>

     <script src="./js/dirPagination.js"></script>
  </body>
</html>
